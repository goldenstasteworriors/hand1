#include "can.h"

#define SDOTXCOBID01 0x601 	 
#define SDORXCOBID01 0x581 	 

	uint8_t canbuf0[]={0x2B,0x01,0x20,0x00,0x00,0x00,0x00,0x00};//设置can比特率为1MHz,默认0可不配置，可以设置800K试一下，0x01
////	uint8_t canbuf1[]={0x2B,0x02,0x64,0x00,0x10,0x00,0x00,0x00};//设置电机类型为EC-sin
////	uint8_t canbuf2[]={0x2B,0x10,0x64,0x01,0xF2,0x03,0x00,0x00};//设置额定电流最大1.01A   输入为1010   单位1mA
////	uint8_t canbuf3[]={0x2F,0x10,0x64,0x03,0x08,0x00,0x00,0x00};//设置电机的极对数8
////	uint8_t canbuf4[]={0x2B,0x10,0x64,0x05,0x73,0x00,0x00,0x00};//设置电机绕组热时间常数 11.5s     输入为115    单位100ms
////	uint8_t canbuf5[]={0x23,0x10,0x22,0x01,0x00,0x08,0x00,0x00};//设置编码器脉冲数2048
////	uint8_t canbuf6[]={0x23,0x10,0x22,0x02,0x02,0x00,0x00,0x00};//设置主从位置编码器,主编码器，辅未知。
////	uint8_t canbuf7[]={0x2B,0xF6,0x60,0x01,0x14,0x06,0x00,0x00};//设置电流环Kp  三环的PID参数的范围都在0-32767
////	uint8_t canbuf8[]={0x2B,0xF6,0x60,0x02,0x6D,0x01,0x00,0x00};//设置电流环Ki
////	uint8_t canbuf9[]={0x2B,0xF9,0x60,0x01,0x16,0x04,0x00,0x00};//设置速度环Kp
////	uint8_t canbuf10[]={0x2B,0xF9,0x60,0x02,0x76,0x00,0x00,0x00};//设置速度环Ki
////	uint8_t canbuf11[]={0x2B,0xFB,0x60,0x01,0xB2,0x00,0x00,0x00};//设置位置环Kp
////	uint8_t canbuf12[]={0x2B,0xFB,0x60,0x02,0x7E,0x01,0x00,0x00};//设置位置环Ki
////	uint8_t canbuf13[]={0x2B,0xFB,0x60,0x03,0x98,0x01,0x00,0x00};//设置位置环Kd
	
	uint8_t canbuf14[]={0x2B,0x40,0x60,0x00,0xFF,0x00,0x00,0x00};//清除错误标识,如果不存在故障，清楚故障条件，0xFF保证第7位为1，不太清楚具体怎么得来。
	uint8_t canbuf15[]={0x82,0x01};															//重置通信   cob_id+cs指令+node_id   这里的cob_id好像是0x000，如果这样的话，需要重写write代码
	uint8_t canbuf16[]={0x2B,0x40,0x60,0x00,0x06,0x00,0x00,0x00};//关闭通信，刷新电源，禁用驱动功能
	uint8_t canbuf17[]={0x01,0x01};															// 启动远程节点 
	
	uint8_t canbuf20[]={0x2F,0x60,0x60,0x00,0xFE,0x00,0x00,0x00};//设置操作模式V,operation mode为-2，补码为0xFE
	uint8_t canbuf21[]={0x2B,0x7F,0x60,0x00,0x72,0x0B,0x00,0x00};//最大速度2930
	uint8_t canbuf22[]={0x2B,0xC5,0x60,0x00,0x07,0xD0,0x00,0x00};//最大加速度2000
	uint8_t canbuf23[]={0x2B,0x40,0x60,0x00,0x06,0x00,0x00,0x00};//关闭电机
	uint8_t canbuf24[]={0x2B,0x40,0x60,0x00,0x0F,0x00,0x00,0x00};//打开、使能装置
	uint8_t canbuf25[]={0x23,0x6B,0x20,0x00,0xF4,0x01,0x00,0x00};//设置目标速度500rpm
	uint8_t canbuf26[]={0x2B,0x40,0x60,0x00,0x0F,0x00,0x00,0x00};//打开、使能装置
	uint8_t canbuf27[]={0x23,0x6B,0x20,0x00,0x00,0x00,0x00,0x00};//设置目标速度0rpm 
	uint8_t canbuf28[]={0x40,0x28,0x20,0x00,0x00,0x00,0x00,0x00};//读取速度值0x606C，速度平均值0x2028
	
	uint8_t canbuf30[]={0x2F,0x60,0x60,0x00,0xFD,0x00,0x00,0x00};//设置操作模式C，operation mode为-3，补码为0xFD
	uint8_t canbuf31[]={0x2B,0x10,0x64,0x01,0xF2,0x03,0x00,0x00};//设置电机额定电流最大1.01A   输入为1010   单位1mA
	uint8_t canbuf32[]={0x23,0x10,0x64,0x04,0x72,0x0B,0x00,0x00};//最大电机速度2930rpm
	uint8_t canbuf33[]={0x2B,0x10,0x64,0x05,0x73,0x00,0x00,0x00};//设置电机绕组热时间常数 11.5s     输入为115    单位100ms
	uint8_t canbuf34[]={0x2B,0x40,0x60,0x00,0x06,0x00,0x00,0x00};//关闭电机
	uint8_t canbuf35[]={0x2B,0x40,0x60,0x00,0x0F,0x00,0x00,0x00};//打开、使能装置
	uint8_t canbuf36[]={0x2B,0x30,0x20,0x00,0x64,0x00,0x00,0x00};//设置目标电流100mA 
	uint8_t canbuf37[]={0x2B,0x40,0x60,0x00,0x0F,0x00,0x00,0x00};//打开、使能装置
	uint8_t canbuf38[]={0x2B,0x30,0x20,0x00,0x00,0x00,0x00,0x00};//设置目标电流0mA 
  uint8_t canbuf39[]={0x40,0xD1,0x30,0x02,0x00,0x00,0x00,0x00};//读取电流值0x30D1，子索引02，电流平均值子索引01（经过修改可以使用）
	
	uint8_t canbuf40[]={0x2F,0x60,0x60,0x00,0xFF,0x00,0x00,0x00};//设置操作模式P，operation mode为-1，补码为0xFF
	uint8_t canbuf41[]={0x23,0x65,0x60,0x00,0x20,0x4e,0x00,0x00};//设置最大跟踪误差20000qc(默认值)   一圈为2048*4qc  可以理解为2000个脉冲信号，
	uint8_t canbuf42[]={0x23,0x7D,0x60,0x01,0x00,0x00,0x00,0x80};//最小位置-2147483648(默认值)
	uint8_t canbuf43[]={0x23,0x7D,0x60,0x02,0xFF,0xFF,0xFF,0x7F};//最大位置2147483647(默认值)
	uint8_t canbuf44[]={0x2B,0x7F,0x60,0x00,0x72,0x0B,0x00,0x00};//最大电机速度2930rpm
	uint8_t canbuf45[]={0x2B,0xC5,0x60,0x00,0xFF,0xFF,0xFF,0xFF};//最大加速度4294967295
	uint8_t canbuf46[]={0x2B,0x40,0x60,0x00,0x06,0x00,0x00,0x00};//关闭电机
	uint8_t canbuf47[]={0x2B,0x40,0x60,0x00,0x0F,0x00,0x00,0x00};//打开、使能装置
	uint8_t canbuf48[]={0x23,0x62,0x20,0x00,0x00,0xA0,0x00,0x00};//设置目标位置2048qc  1/4圈
	uint8_t canbuf49[]={0x2B,0x40,0x60,0x00,0x0F,0x00,0x00,0x00};//打开、使能装置
	uint8_t canbuf50[]={0x2B,0x40,0x60,0x00,0x00,0x00,0x00,0x00};//关闭、停止电机 
	uint8_t canbuf51[]={0x40,0x64,0x60,0x00,0x00,0x00,0x00,0x00};//读取位置值
	
//目标位置控制(PPM模式)
	uint8_t canbuf52[]={0x2F,0x60,0x60,0x00,0x01,0x00,0x00,0x00};//设置操作模式PPM，operation mode为0x01
	uint8_t canbuf53[]={0x23,0x65,0x60,0x00,0x20,0x4e,0x00,0x00};//设置最大跟踪误差20000qc(默认值)   一圈为2048*4qc  可以理解为2000个脉冲信号，
	uint8_t canbuf54[]={0x23,0x7D,0x60,0x01,0x00,0x00,0x00,0x80};//最小位置-2147483648(默认值),在PPM中不需要设置
	uint8_t canbuf55[]={0x23,0x7D,0x60,0x02,0xFF,0xFF,0xFF,0x7F};//最大位置2147483647(默认值),在PPM中不需要设置
	uint8_t canbuf56[]={0x2B,0x7F,0x60,0x00,0x72,0x0B,0x00,0x00};//最大电机速度2930rpm，在上位机中已设置
	uint8_t canbuf57[]={0x2B,0xC5,0x60,0x00,0xFF,0xFF,0xFF,0xFF};//最大加速度4294967295,在PPM中不需要设置
	uint8_t canbuf58[]={0x23,0x81,0x60,0x00,0xE8,0x03,0x00,0x00};//目标速度，加速后得到的速度,这里设置为默认值1000,即0x3E8
	uint8_t canbuf59[]={0x23,0x83,0x60,0x00,0x10,0x27,0x00,0x00};//加速时的加速度，这里是默认值10000rpm/s，即0x2710
	uint8_t canbuf60[]={0x23,0x84,0x60,0x00,0x10,0x27,0x00,0x00};//减速时的加速度，这里是默认值10000rpm/s，即0x2710
	uint8_t canbuf61[]={0x23,0x85,0x60,0x00,0x10,0x27,0x00,0x00};//执行快速停止命令时减速的加速度，这里是默认值10000rpm/s，即0x2710
	uint8_t canbuf62[]={0x2B,0x86,0x60,0x00,0x00,0x00,0x00,0x00};//运动曲线类型，这里是默认的梯形曲线(加速等时)
	uint8_t canbuf63[]={0x2B,0x40,0x60,0x00,0x06,0x00,0x00,0x00};//关闭电机
	uint8_t canbuf64[]={0x2B,0x40,0x60,0x00,0x0F,0x00,0x00,0x00};//打开、使能装置
	uint8_t canbuf65[]={0x23,0x7A,0x60,0x00,0x00,0x00,0x00,0x00};//设置目标位置,这里是默认值0
	uint8_t canbuf66[]={0x2B,0x40,0x60,0x00,0x3F,0x00,0x00,0x00};//打开、使能装置，设置为绝对位置，马上开始运动
	uint8_t canbuf67[]={0x2B,0x40,0x60,0x00,0x0B,0x00,0x00,0x00};//关闭、停止电机 (快速停止)
	uint8_t canbuf68[]={0x2B,0x40,0x60,0x00,0x0F,0x01,0x00,0x00};//关闭、停止电机 (缓速停止(halt))
	uint8_t canbuf69[]={0x40,0x64,0x60,0x00,0x00,0x00,0x00,0x00};//读取当前位置值
	uint8_t canbuf70[]={0x40,0x62,0x60,0x00,0x00,0x00,0x00,0x00};//请求读取设定位置值


//目标速度控制(PVM模式)
	uint8_t canbuf71[]={0x2F,0x60,0x60,0x00,0x03,0x00,0x00,0x00};//设置操作模式PVM，operation mode为0x03
	uint8_t canbuf72[]={0x2B,0x7F,0x60,0x00,0x72,0x0B,0x00,0x00};//最大电机速度2930rpm，在上位机中已设置
	uint8_t canbuf73[]={0x23,0x83,0x60,0x00,0x10,0x27,0x00,0x00};//加速时的加速度，这里是默认值10000rpm/s，即0x2710
	uint8_t canbuf74[]={0x23,0x84,0x60,0x00,0x10,0x27,0x00,0x00};//减速时的加速度，这里是默认值10000rpm/s，即0x2710
	uint8_t canbuf75[]={0x23,0x85,0x60,0x00,0x10,0x27,0x00,0x00};//执行快速停止命令时减速的加速度，这里是默认值10000rpm/s，即0x2710
	uint8_t canbuf76[]={0x2B,0x86,0x60,0x00,0x00,0x00,0x00,0x00};//运动曲线类型，这里是默认的梯形曲线(加速等时)
	uint8_t canbuf77[]={0x2B,0x40,0x60,0x00,0x06,0x00,0x00,0x00};//关闭电机
	uint8_t canbuf78[]={0x2B,0x40,0x60,0x00,0x0F,0x00,0x00,0x00};//打开、使能装置
	uint8_t canbuf79[]={0x23,0xFF,0x60,0x00,0x00,0x00,0x00,0x00};//设置目标速度(这里直接设置为0x00了)
	uint8_t canbuf80[]={0x2B,0x40,0x60,0x00,0x0F,0x00,0x00,0x00};//打开、使能装置，开始运动
	uint8_t canbuf81[]={0x2B,0x40,0x60,0x00,0x0B,0x00,0x00,0x00};//关闭、停止电机 (快速停止)
	uint8_t canbuf82[]={0x2B,0x40,0x60,0x00,0x0F,0x01,0x00,0x00};//关闭、停止电机 (缓速停止(halt))
	uint8_t canbuf83[]={0x40,0x6C,0x60,0x00,0x00,0x00,0x00,0x00};//读取当前速度值
	uint8_t canbuf84[]={0x40,0xD3,0x30,0x01,0x00,0x00,0x00,0x00};//读取当前速度平均值
	uint8_t canbuf85[]={0x40,0x6C,0x60,0x00,0x00,0x00,0x00,0x00};//请求读取设定速度值

	
	//目标扭矩控制(CST模式)
	uint8_t canbuf86[]={0x2F,0x60,0x60,0x00,0x0A,0x00,0x00,0x00};//设置操作模式CST，operation mode为0x0A
	uint8_t canbuf87[]={0x23,0x80,0x60,0x00,0x50,0xC3,0x00,0x00};//电机最大速度，这里是默认值50000，即0xC350
	uint8_t canbuf88[]={0x23,0x03,0x30,0x03,0xA0,0x86,0x01,0x00};//齿轮最大允许输入速度,这里设置为默认值100000,即0x186A0
	uint8_t canbuf89[]={0x23,0x84,0x60,0x00,0x10,0x27,0x00,0x00};//减速时的加速度，这里是默认值10000rpm/s，即0x2710
	uint8_t canbuf90[]={0x23,0x85,0x60,0x00,0x10,0x27,0x00,0x00};//执行快速停止命令时减速的加速度，这里是默认值10000rpm/s，即0x2710
	uint8_t canbuf91[]={0x2B,0x40,0x60,0x00,0x06,0x00,0x00,0x00};//关闭电机
	uint8_t canbuf92[]={0x2B,0x40,0x60,0x00,0x0F,0x00,0x00,0x00};//打开、使能装置
	uint8_t canbuf93[]={0x2B,0xB2,0x60,0x00,0x00,0x00,0x00,0x00};//允许的转矩偏差，这里设置为0
	uint8_t canbuf94[]={0x2B,0x71,0x60,0x00,0x00,0x00,0x00,0x00};//设置目标转矩,这里是默认值0
	uint8_t canbuf95[]={0x40,0x77,0x60,0x00,0x00,0x00,0x00,0x00};//请求读取当前转矩值
	uint8_t canbuf96[]={0x40,0x6C,0x60,0x00,0x00,0x00,0x00,0x00};//请求读取当前速度值
	uint8_t canbuf97[]={0x40,0x64,0x60,0x00,0x00,0x00,0x00,0x00};//请求读取当前位置值

	//归位(HMM模式)
	uint8_t canbuf98[]={0x2F,0x60,0x60,0x00,0x06,0x00,0x00,0x00};//设置操作模式HHM，operation mode为0x06
	uint8_t canbuf99[]={0x23,0x65,0x60,0x00,0x20,0x4e,0x00,0x00};//设置最大跟踪误差20000qc(默认值)   一圈为2048*4qc  可以理解为2000个脉冲信号，
	uint8_t canbuf100[]={0x23,0xB1,0x30,0x00,0x00,0x00,0x00,0x00};//偏移，这里设置为0
	uint8_t canbuf101[]={0x2B,0x7F,0x60,0x00,0x72,0x0B,0x00,0x00};//最大电机速度2930rpm，在上位机中已设置
	uint8_t canbuf102[]={0x23,0x85,0x60,0x00,0x10,0x27,0x00,0x00};//执行快速停止命令时减速的加速度，这里是默认值10000rpm/s，即0x2710
	uint8_t canbuf103[]={0x23,0x99,0x60,0x01,0x64,0x00,0x00,0x00};//Speed for switch search，这里设置为默认值100
	uint8_t canbuf104[]={0x23,0x99,0x60,0x02,0x0A,0x00,0x00,0x00};//Speed for zero search，这里设置为默认值10
	uint8_t canbuf105[]={0x23,0x9A,0x60,0x00,0xE8,0x03,0x00,0x00};//加速度，这里设置为默认值1000
	uint8_t canbuf106[]={0x23,0xB0,0x30,0x00,0x00,0x00,0x00,0x00};//home position，这里设置为默认值0
	uint8_t canbuf107[]={0x2F,0x98,0x60,0x00,0x00,0x00,0x00,0x00};//
	uint8_t canbuf108[]={0x2B,0x40,0x60,0x00,0x06,0x00,0x00,0x00};//关闭电机
	uint8_t canbuf109[]={0x2B,0x40,0x60,0x00,0x0F,0x00,0x00,0x00};//打开、使能装置
	uint8_t canbuf110[]={0x2B,0x40,0x60,0x00,0x1F,0x00,0x00,0x00};//打开、使能装置，开始归位
	uint8_t canbuf111[]={0x2B,0x40,0x60,0x00,0x0F,0x00,0x00,0x00};//回到初始状态以停止归位
	uint8_t canbuf112[]={0x2B,0x40,0x60,0x00,0x1F,0x01,0x00,0x00};//缓速停止归位
	uint8_t canbuf113[]={0x2B,0x40,0x60,0x00,0x0B,0x00,0x00,0x00};//快速停止归位